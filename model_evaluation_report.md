# บทที่ 3 ผลการวิเคราะห์ข้อมูล

## 3.1 การเก็บรวบรวมและเตรียมข้อมูล

### 3.1.1 แหล่งที่มาของข้อมูล
การวิจัยนี้ใช้ข้อมูลจากดาวเทียมที่ได้จาก **Google Earth Engine (GEE)** ซึ่งเป็นแพลตฟอร์มประมวลผลข้อมูลภูมิสารสนเทศขนาดใหญ่ของ Google โดยข้อมูลที่ใช้ครอบคลุมพื้นที่ประเทศไทย

**ช่วงเวลาของข้อมูล:**
- **ข้อมูลแบบอนุกรมเวลา (Temporal Data)**: มกราคม 2018 - ตุลาคม 2025 (94 เดือน)
- **ข้อมูลแบบคงที่ (Static Data)**: ข้อมูลภูมิประเทศและการใช้ที่ดิน

**พื้นที่ศึกษา:**
- ครอบคลุมพื้นที่ประเทศไทยทั้งหมด
- ข้อมูลอยู่ในรูปแบบ Raster (Grid) จากดาวเทียม

### 3.1.2 ชุดข้อมูลที่ใช้ในการวิจัย

#### ก. ข้อมูลแบบอนุกรมเวลา (Temporal Data - 94 เดือน)

1. **LST (Land Surface Temperature)** - อุณหภูมิพื้นผิวดิน
   - แหล่งข้อมูล: MODIS Terra/Aqua
   - ความถี่: รายเดือน (94 เดือน)
   - ไฟล์: `Monthly_LST_Filled_2018-2025.tif`

2. **CH4 (Methane)** - ความเข้มข้นของก๊าซมีเทน
   - แหล่งข้อมูล: Sentinel-5P TROPOMI
   - ความถี่: รายเดือน (84 เดือน)
   - ไฟล์: `Monthly_CH4_2018-2025.tif`

3. **NO2 (Nitrogen Dioxide)** - ความเข้มข้นของก๊าซไนโตรเจนไดออกไซด์
   - แหล่งข้อมูล: Sentinel-5P TROPOMI
   - ความถี่: รายเดือน (89 เดือน)
   - ไฟล์: `Monthly_NO2_2018-2025.tif`

4. **CO (Carbon Monoxide)** - ความเข้มข้นของก๊าซคาร์บอนมอนอกไซด์
   - แหล่งข้อมูล: Sentinel-5P TROPOMI
   - ความถี่: รายเดือน (88 เดือน)
   - ไฟล์: `Monthly_CO_2018-2025.tif`

5. **NDVI (Normalized Difference Vegetation Index)** - ดัชนีความแตกต่างของพืชพรรณ
   - แหล่งข้อมูล: MODIS Terra/Aqua
   - ความถี่: รายเดือน (94 เดือน)
   - ไฟล์: `Monthly_NDVI_2018-2025.tif`

6. **Albedo** - ค่าการสะท้อนแสงของพื้นผิว
   - แหล่งข้อมูล: MODIS Terra/Aqua
   - ความถี่: รายเดือน (94 เดือน)
   - ไฟล์: `Monthly_Albedo_2018-2025.tif`

7. **Solar Radiation** - ปริมาณรังสีดวงอาทิตย์
   - แหล่งข้อมูล: ERA5 Climate Reanalysis
   - ความถี่: รายเดือน (94 เดือน)
   - ไฟล์: `Monthly_Solar_Radiation_2018-2025.tif`

#### ข. ข้อมูลแบบคงที่ (Static Data)

8. **LULC (Land Use Land Cover)** - ประเภทการใช้ประโยชน์ที่ดิน
   - แหล่งข้อมูล: ESA WorldCover
   - ไฟล์: `Static_LULC_Thailand.tif`

9. **DEM (Digital Elevation Model)** - ระดับความสูงจากระดับน้ำทะเล
   - แหล่งข้อมูล: SRTM (Shuttle Radar Topography Mission)
   - ไฟล์: `Static_DEM_Thailand.tif`

### 3.1.3 กระบวนการประมวลผลข้อมูล

#### ขั้นตอนที่ 1: การดาวน์โหลดข้อมูลจาก Google Earth Engine

ข้อมูลทั้งหมดถูกประมวลผลและส่งออกจาก Google Earth Engine ในรูปแบบ GeoTIFF โดยบันทึกไว้ใน Google Drive ในโฟลเดอร์ `GEE_Research_Export`

#### ขั้นตอนที่ 2: การโหลดและจัดการข้อมูล

ใช้ไลบรารี **xarray** และ **rioxarray** ในการโหลดข้อมูล GeoTIFF ทั้ง 9 ไฟล์ โดยใช้เทคนิค **chunking** เพื่อจัดการไฟล์ขนาดใหญ่

```python
# โหลดข้อมูลแบบอนุกรมเวลา
data_lst = xr.open_dataset(file_lst, engine='rasterio', chunks={'band': 1})
data_ch4 = xr.open_dataset(file_ch4, engine='rasterio', chunks={'band': 1})
# ... (ไฟล์อื่นๆ)

# โหลดข้อมูลแบบคงที่
data_lulc = xr.open_dataset(file_lulc, engine='rasterio')
data_dem = xr.open_dataset(file_dem, engine='rasterio')
```

#### ขั้นตอนที่ 3: การจัดเรียงและประสานข้อมูล

**3.1 การสร้างพิกัดเวลา (Time Coordinate)**
- สร้างพิกัดเวลา 94 เดือน (มกราคม 2018 - ตุลาคม 2025)
- ใช้ `pd.date_range()` เพื่อสร้างดัชนีเวลาแบบรายเดือน

**3.2 การจัดเรียงมิติข้อมูล (Dimension Alignment)**
- แปลงมิติ `band` เป็น `time` สำหรับข้อมูลอนุกรมเวลา
- ใช้ `reindex()` เพื่อจัดเรียงข้อมูลที่มีจำนวนเดือนไม่เท่ากัน (เช่น CH4 มี 84 เดือน)
- ข้อมูลที่ขาดหายไปจะถูกเติมด้วย NaN

**3.3 การประมวลผลข้อมูลแบบคงที่**
- ข้อมูล LULC และ DEM ถูก broadcast ให้มีมิติเวลา (94 เดือน)
- ใช้ `reindex()` เพื่อจัดเรียงพิกัดเชิงพื้นที่ให้ตรงกับข้อมูล LST
- เติมค่า NaN ด้วย:
  - LULC: ใช้ค่า mode (ค่าที่พบบ่อยที่สุด)
  - DEM: ใช้ค่าเฉลี่ย (mean)

**3.4 การรวมข้อมูลเป็น Dataset เดียว**
```python
dataset = xr.Dataset({
    'LST': da_lst,
    'CH4': da_ch4,
    'NO2': da_no2,
    'CO': da_co,
    'NDVI': da_ndvi,
    'Albedo': da_albedo,
    'Solar_Radiation': da_solar,
    'LULC': da_lulc_processed,
    'DEM': da_dem_processed
})
```

#### ขั้นตอนที่ 4: การสุ่มตัวอย่างข้อมูล (Sampling)

เนื่องจากข้อมูลมีขนาดใหญ่มาก (ครอบคลุมทั้งประเทศไทย × 94 เดือน) จึงใช้วิธีการสุ่มตัวอย่างเพื่อลดภาระการประมวลผล:

**4.1 Stack มิติเชิงพื้นที่**
- รวมมิติ (y, x) เป็นมิติเดียวชื่อ `pixel`
- แปลงข้อมูล 3 มิติ (time, y, x) เป็น 2 มิติ (time, pixel)

**4.2 การกรองข้อมูล**
- ลบพิกเซลที่เป็น NaN ทั้งหมด (พื้นที่นอกประเทศไทย)
- ใช้ `dropna('pixel', how='all')` เพื่อคงเฉพาะพิกเซลที่มีข้อมูล

**4.3 การสุ่มตัวอย่าง**
- สุ่มตัวอย่าง **30,000 พิกเซล** จากพิกเซลที่ใช้งานได้ทั้งหมด
- ใช้ `np.random.choice()` แบบไม่ซ้ำ (replace=False)
- ผลลัพธ์: 30,000 พิกเซล × 94 เดือน = 2,820,000 แถวข้อมูล

#### ขั้นตอนที่ 5: การแปลงเป็น DataFrame และเตรียมข้อมูล

**5.1 แปลงเป็น Pandas DataFrame**
```python
df = sampled_data.to_dataframe()
df_clean = df.reset_index()
```

**5.2 การกรองข้อมูล**
- กรองเฉพาะข้อมูลที่ LST > 0 (ลบค่าผิดปกติ)
- สร้างตัวแปรเวลาเพิ่มเติม: `month` และ `year`

**5.3 การจัดการค่าที่หายไป (Missing Data Imputation)**
- ใช้ **SimpleImputer** จาก scikit-learn
- กลยุทธ์: แทนที่ค่า NaN ด้วยค่าเฉลี่ย (mean) ของแต่ละตัวแปร
- เหตุผล: ข้อมูลบางตัวแปร (เช่น CH4, NO2, CO) มีช่วงเวลาไม่ครบ 94 เดือน

```python
imputer = SimpleImputer(strategy='mean')
X = imputer.fit_transform(X_raw)
```

**5.4 การตรวจสอบความแปรปรวนของข้อมูล (Data Variance Check)**

ก่อนการเทรนโมเดล ได้มีการตรวจสอบความแปรปรวน (Variance) ของตัวแปรอิสระทั้งหมด เพื่อให้แน่ใจว่าข้อมูลมีคุณภาพเพียงพอสำหรับการเรียนรู้ของโมเดล

**ผลการตรวจสอบ:**
- พบว่าตัวแปร **LULC** และ **DEM** ที่ได้จากการสุ่มตัวอย่าง 30,000 พิกเซล มีค่าคงที่เพียงค่าเดียว (Zero Variance)
  - LULC: ทุกแถวมีค่า = 0.0 (Unique values = 1, Std = 0.0000)
  - DEM: ทุกแถวมีค่า = 101.70 เมตร (Unique values = 1, Std = 0.0000)

**สาเหตุ:**
- การสุ่มตัวอย่าง 30,000 พิกเซลอาจได้พื้นที่ที่มีลักษณะภูมิประเทศและการใช้ที่ดินคล้ายกัน
- ข้อมูล Static (LULC, DEM) ที่ถูก broadcast ให้มี 94 เดือนอาจมีปัญหาในขั้นตอน reindex และ fillna

**การตัดสินใจ:**
- เนื่องจากตัวแปรที่ไม่มีความแปรปรวนไม่สามารถให้ข้อมูลใดๆ กับโมเดลได้ (Correlation = NaN)
- จึง**ตัดสินใจลบตัวแปร LULC และ DEM ออกจากชุดข้อมูล**ก่อนทำการแบ่งข้อมูลและเทรนโมเดล
- ตัวแปรที่เหลือ: CH4, NO2, CO, NDVI, Albedo, Solar_Radiation, month, year (รวม 8 ตัวแปร)

**5.5 การวิเคราะห์ความสัมพันธ์ระหว่างตัวแปร (Correlation Analysis)**

เพื่อทำความเข้าใจความสัมพันธ์ระหว่างตัวแปรต่างๆ ได้ทำการวิเคราะห์ค่า Correlation Coefficient และสร้างฮีทแมพ (Heatmap) แสดงความสัมพันธ์ระหว่างตัวแปรทั้งหมด

![Correlation Heatmap](correlation_heatmap.png)
*รูปที่ 3.1: ฮีทแมพแสดงความสัมพันธ์ระหว่างตัวแปรในการทำนาย LST*

**ผลการวิเคราะห์ความสัมพันธ์กับ LST:**

| อันดับ | ตัวแปร | Correlation | ทิศทาง | ความหมาย |
|--------|--------|-------------|--------|----------|
| 1 | Solar_Radiation | +0.4244 | บวก | รังสีดวงอาทิตย์สูง → LST สูง |
| 2 | Albedo | +0.4006 | บวก | ค่าสะท้อนแสงสูง → LST สูง |
| 3 | month | -0.3276 | ลบ | เดือนที่มากขึ้น → LST ลดลง (ฤดูกาล) |
| 4 | year | -0.0689 | ลบ | แนวโน้มลดลงเล็กน้อยตามปี |
| 5 | CO | -0.0634 | ลบ | ความสัมพันธ์อ่อนแอ |
| 6 | CH4 | +0.0549 | บวก | ความสัมพันธ์อ่อนแอ |
| 7 | NDVI | -0.0388 | ลบ | พืชพรรณมาก → LST ลดลงเล็กน้อย |
| 8 | NO2 | -0.0201 | ลบ | ความสัมพันธ์อ่อนแอมาก |

**ข้อสังเกตสำคัญ:**

1. **ความสัมพันธ์แบบบวกที่แข็งแรง:**
   - **Solar_Radiation** (r = +0.42): มีความสัมพันธ์บวกสูงสุด สอดคล้องกับทฤษฎีที่ว่ารังสีดวงอาทิตย์เป็นแหล่งพลังงานหลักที่ทำให้พื้นผิวร้อนขึ้น
   - **Albedo** (r = +0.40): พื้นผิวที่มีค่า Albedo สูงมักเป็นพื้นที่เปิดโล่ง (เช่น ทะเลทราย พื้นที่เมือง) ซึ่งมี LST สูง

2. **ความสัมพันธ์แบบลบที่มีนัยสำคัญ:**
   - **month** (r = -0.33): แสดงถึงความแปรปรวนตามฤดูกาล โดย LST มีแนวโน้มลดลงในช่วงปลายปี (ฤดูหนาว)

3. **ความสัมพันธ์อ่อนแอ:**
   - ก๊าซเรือนกระจก (CH4, NO2, CO) และ NDVI มีความสัมพันธ์อ่อนแอกับ LST (|r| < 0.1)
   - แม้ความสัมพันธ์เชิงเส้นจะอ่อนแอ แต่ตัวแปรเหล่านี้อาจมีความสัมพันธ์แบบไม่เชิงเส้น (Non-linear) ที่โมเดล Random Forest สามารถจับได้

4. **ความสัมพันธ์ระหว่างตัวแปรอิสระ:**
   - ตัวแปรส่วนใหญ่มีความสัมพันธ์กันต่ำ (|r| < 0.3) แสดงว่าไม่มีปัญหา Multicollinearity ที่รุนแรง
   - ช่วยให้โมเดลสามารถเรียนรู้ข้อมูลจากแต่ละตัวแปรได้อย่างอิสระ

**5.6 การบันทึกข้อมูล**
- บันทึกข้อมูลที่ประมวลผลแล้วในรูปแบบ Parquet
- ไฟล์: `df_final_processed.parquet`
- ขนาดข้อมูลสุดท้าย: **984,274 แถว** (หลังจากกรอง LST > 0)

### 3.1.4 สรุปชุดข้อมูลที่ใช้ในการวิจัย

- **จำนวนข้อมูลทั้งหมด**: 984,274 แถว (records)
- **ช่วงเวลา**: มกราคม 2018 - ตุลาคม 2025 (94 เดือน)
- **พื้นที่ศึกษา**: ประเทศไทย (สุ่มตัวอย่าง 30,000 พิกเซล)
- **แหล่งข้อมูล**: Google Earth Engine (MODIS, Sentinel-5P, ERA5, SRTM)

### 3.1.5 ตัวแปรที่ใช้ในการวิจัย

#### ตัวแปรอิสระ (Independent Variables)
การวิจัยนี้ใช้ตัวแปรอิสระทั้งหมด **8 ตัวแปร** ประกอบด้วย:

1. **CH4** - ความเข้มข้นของก๊าซมีเทน (Methane)
2. **NO2** - ความเข้มข้นของก๊าซไนโตรเจนไดออกไซด์ (Nitrogen Dioxide)
3. **CO** - ความเข้มข้นของก๊าซคาร์บอนมอนอกไซด์ (Carbon Monoxide)
4. **NDVI** - ดัชนีความแตกต่างของพืชพรรณ (Normalized Difference Vegetation Index)
5. **Albedo** - ค่าการสะท้อนแสงของพื้นผิว
6. **Solar_Radiation** - ปริมาณรังสีดวงอาทิตย์
7. **month** - เดือน (ตัวแปรเวลา)
8. **year** - ปี (ตัวแปรเวลา)

**หมายเหตุ:** ตัวแปร LULC และ DEM ถูกลบออกจากการวิเคราะห์ เนื่องจากไม่มีความแปรปรวนในชุดข้อมูลที่สุ่มตัวอย่าง (ดูรายละเอียดในขั้นตอนที่ 5.4)

#### ตัวแปรตาม (Dependent Variable)
- **LST** - อุณหภูมิพื้นผิวดิน (Land Surface Temperature)

### 3.1.6 การแบ่งข้อมูล
ข้อมูลถูกแบ่งออกเป็น 2 ชุด ตามหลักการของ Machine Learning ดังนี้:

- **ชุดข้อมูลฝึกสอน (Training Set)**: 688,991 แถว (70%)
- **ชุดข้อมูลทดสอบ (Testing Set)**: 295,283 แถว (30%)

การแบ่งข้อมูลใช้วิธี Random Split ด้วย random_state=42 เพื่อให้สามารถทำซ้ำผลการทดลองได้

## 3.2 การพัฒนาโมเดล

### 3.2.1 อัลกอริทึมที่ใช้
การวิจัยนี้ใช้อัลกอริทึม **Random Forest Regressor** ซึ่งเป็นอัลกอริทึมประเภท Ensemble Learning ที่มีประสิทธิภาพสูงในการทำนายค่าต่อเนื่อง (Regression)

### 3.2.2 การจัดการข้อมูลที่หายไป (Missing Data)
ใช้วิธี **Mean Imputation** ในการแทนที่ค่าที่หายไปด้วยค่าเฉลี่ยของแต่ละตัวแปร โดยใช้ SimpleImputer จาก scikit-learn

### 3.2.3 การตั้งค่าพารามิเตอร์โมเดล

#### โมเดลที่ 1: โมเดลพื้นฐาน (Baseline Model)
```python
RandomForestRegressor(
    n_estimators=100,
    random_state=42,
    n_jobs=-1,
    verbose=1
)
```

**พารามิเตอร์:**
- `n_estimators=100`: จำนวนต้นไม้ในป่า (Decision Trees) = 100 ต้น
- `random_state=42`: ค่า seed สำหรับการสุ่ม เพื่อให้ผลลัพธ์ทำซ้ำได้
- `n_jobs=-1`: ใช้ CPU ทุก core ในการประมวลผล
- `verbose=1`: แสดงความคืบหน้าระหว่างการเทรน

**เวลาในการเทรน:** 2.11 นาที

#### โมเดลที่ 2: โมเดลที่ปรับปรุง (Optimized Model)
```python
RandomForestRegressor(
    n_estimators=100,
    max_depth=25,
    min_samples_split=20,
    min_samples_leaf=10,
    max_features='sqrt',
    random_state=42,
    n_jobs=-1,
    verbose=1
)
```

**พารามิเตอร์เพิ่มเติม:**
- `max_depth=25`: จำกัดความลึกสูงสุดของต้นไม้ที่ 25 ระดับ
- `min_samples_split=20`: จำนวนตัวอย่างขั้นต่ำที่ต้องมีเพื่อแบ่ง node = 20
- `min_samples_leaf=10`: จำนวนตัวอย่างขั้นต่ำที่ leaf node = 10
- `max_features='sqrt'`: จำนวน features ที่ใช้ในแต่ละ tree = √8 ≈ 2-3 features

**เวลาในการเทรน:** 0.67 นาที

**เหตุผลในการปรับปรุง:** เพื่อลดปัญหา Overfitting และเพิ่มความสามารถในการ Generalization

## 3.3 ผลการประเมินประสิทธิภาพโมเดล

### 3.3.1 ตัวชี้วัดที่ใช้ในการประเมิน

1. **R² Score (Coefficient of Determination)**
   - วัดสัดส่วนความแปรปรวนของตัวแปรตามที่โมเดลสามารถอธิบายได้
   - ค่าอยู่ระหว่าง 0-1 โดยยิ่งใกล้ 1 แสดงว่าโมเดลดีขึ้น

2. **RMSE (Root Mean Squared Error)**
   - วัดค่าความคลาดเคลื่อนเฉลี่ยระหว่างค่าทำนายและค่าจริง
   - ยิ่งค่าต่ำแสดงว่าโมเดลทำนายแม่นยำมากขึ้น

### 3.3.2 ผลการทดสอบโมเดลที่ 1 (Baseline Model)

| ชุดข้อมูล | R² Score | RMSE |
|-----------|----------|------|
| Training Set | 0.9601 | 29.03 |
| Testing Set | 0.7180 | 77.49 |
| **Gap (Train - Test)** | **0.2421** | - |

**การวิเคราะห์:**
- โมเดลมีประสิทธิภาพสูงมากในชุดข้อมูลฝึกสอน (R²=0.96)
- แต่ประสิทธิภาพลดลงในชุดข้อมูลทดสอบ (R²=0.72)
- **Gap ระหว่าง Train และ Test มีค่าสูง (0.24)** แสดงว่าเกิดปัญหา **Overfitting**
- โมเดลจำรูปแบบในข้อมูลฝึกสอนมากเกินไป ทำให้ไม่สามารถทำนายข้อมูลใหม่ได้ดีเท่าที่ควร

### 3.3.3 ผลการทดสอบโมเดลที่ 2 (Optimized Model)

| ชุดข้อมูล | R² Score | RMSE |
|-----------|----------|------|
| Training Set | 0.7710 | 69.57 |
| Testing Set | 0.7087 | 78.76 |
| **Gap (Train - Test)** | **0.0623** | - |

**Cross-Validation (5-Fold):**
- R² Mean: 0.7012 ± 0.0035
- R² Scores: [0.6996, 0.7008, 0.7019, 0.6995, 0.7042]

**การวิเคราะห์:**
- โมเดลมีประสิทธิภาพที่สมดุลระหว่างชุดข้อมูลฝึกสอนและทดสอบ
- **Gap ลดลง 74.3%** (จาก 0.2421 เหลือ 0.0623)
- ค่า R² จาก Cross-Validation (0.7012) ใกล้เคียงกับ Test R² (0.7087) แสดงว่าโมเดลมีความเสถียร
- **ปัญหา Overfitting ลดลงอย่างมีนัยสำคัญ**
- โมเดลมีความสามารถในการ **Generalization** ที่ดีขึ้น
- การลบตัวแปร LULC และ DEM ที่ไม่มีความแปรปรวนไม่ส่งผลกระทบต่อประสิทธิภาพของโมเดล

### 3.3.4 การเปรียบเทียบโมเดล

| เกณฑ์การประเมิน | Baseline Model | Optimized Model | การปรับปรุง |
|-----------------|----------------|-----------------|-------------|
| จำนวน Features | 10 | 8 | -2 |
| Test R² Score | 0.7180 | 0.7087 | -1.30% |
| Test RMSE | 77.49 | 78.76 | +1.64% |
| Overfitting Gap | 0.2421 | 0.0623 | **-74.3%** |
| Training Time | 2.11 min | 0.67 min | **-68.2%** |
| Generalization | ต่ำ | **สูง** | ดีขึ้นมาก |

**สรุป:** แม้ว่าโมเดลที่ปรับปรุงจะมี Test R² ลดลงเล็กน้อย (1.30%) แต่มีข้อดีที่สำคัญคือ:
1. ลดปัญหา Overfitting ได้อย่างมีนัยสำคัญ (74.3%)
2. เร็วกว่าในการเทรน (68.2%)
3. มีความเสถียรและน่าเชื่อถือมากกว่าในการใช้งานจริง
4. ใช้ตัวแปรน้อยกว่า (8 แทน 10) ทำให้โมเดลเรียบง่ายและตีความได้ง่ายขึ้น

## 3.4 ความสำคัญของตัวแปร (Feature Importance)

### 3.4.1 ผลการวิเคราะห์ความสำคัญของตัวแปร

| อันดับ | ตัวแปร | ความสำคัญ (%) | คำอธิบาย |
|--------|--------|---------------|----------|
| 1 | Solar_Radiation | 22.10% | ปริมาณรังสีดวงอาทิตย์มีผลต่อ LST มากที่สุด |
| 2 | month | 20.63% | ฤดูกาล/เดือนมีผลต่ออุณหภูมิอย่างมีนัยสำคัญ |
| 3 | Albedo | 17.09% | ค่าการสะท้อนแสงของพื้นผิวส่งผลต่อการดูดซับความร้อน |
| 4 | NDVI | 11.59% | ความหนาแน่นของพืชพรรณช่วยลดอุณหภูมิพื้นผิว |
| 5 | CO | 9.46% | ก๊าซคาร์บอนมอนอกไซด์มีความสัมพันธ์กับ LST |
| 6 | NO2 | 7.19% | ก๊าซไนโตรเจนไดออกไซด์จากมลพิษทางอากาศ |
| 7 | CH4 | 6.37% | ก๊าซมีเทนมีผลต่ออุณหภูมิในระดับหนึ่ง |
| 8 | year | 5.56% | แนวโน้มการเปลี่ยนแปลงตามปี |

**หมายเหตุ:** ตัวแปร LULC และ DEM ไม่ปรากฏในตารางเนื่องจากถูกลบออกจากการวิเคราะห์ (ไม่มีความแปรปรวนในชุดข้อมูล)

### 3.4.2 การตีความผล

**ตัวแปรที่มีความสำคัญสูง (Top 4):**

1. **Solar_Radiation (22.10%)**: รังสีดวงอาทิตย์เป็นแหล่งพลังงานหลักที่ทำให้พื้นผิวดินร้อนขึ้น ผลการวิจัยสอดคล้องกับทฤษฎีทางฟิสิกส์ที่ว่าการถ่ายเทพลังงานจากดวงอาทิตย์เป็นปัจจัยหลักในการกำหนดอุณหภูมิพื้นผิว

2. **month (20.63%)**: ฤดูกาลมีผลต่อมุมของแสงอาทิตย์และระยะเวลาที่ได้รับแสง ส่งผลโดยตรงต่ออุณหภูมิพื้นผิว ความสำคัญที่สูงนี้แสดงให้เห็นถึงความแปรปรวนตามฤดูกาลของ LST ในประเทศไทย

3. **Albedo (17.09%)**: ค่าการสะท้อนแสงของพื้นผิวมีผลสำคัญต่อการดูดซับความร้อน พื้นผิวที่มีค่า Albedo สูง (สะท้อนแสงมาก) จะดูดซับความร้อนน้อยกว่าพื้นผิวที่มีค่า Albedo ต่ำ

4. **NDVI (11.59%)**: ความหนาแน่นของพืชพรรณมีบทบาทสำคัญในการลดอุณหภูมิพื้นผิวผ่านกระบวนการคายน้ำ (Evapotranspiration) และการให้ร่มเงา

**ตัวแปรที่มีความสำคัญปานกลาง:**
- ก๊าซเรือนกระจก (CO, NO2, CH4) มีความสำคัญรวมกัน 23.02% แสดงให้เห็นถึงความสัมพันธ์ระหว่างมลพิษทางอากาศและอุณหภูมิพื้นผิว

**การกระจายความสำคัญ:**
- ตัวแปร 3 อันดับแรก (Solar_Radiation, month, Albedo) มีความสำคัญรวมกัน 59.82% แสดงว่าปัจจัยด้านพลังงานและฤดูกาลเป็นตัวกำหนดหลักของ LST

## 3.5 สรุปผลการวิจัย

### 3.5.1 ข้อค้นพบหลัก

1. **โมเดล Random Forest สามารถทำนายอุณหภูมิพื้นผิวดิน (LST) ได้อย่างมีประสิทธิภาพ** โดยมีค่า R² Score = 0.7087 หรือสามารถอธิบายความแปรปรวนของ LST ได้ 70.87% โดยใช้ตัวแปรอิสระเพียง 8 ตัว

2. **การปรับปรุงพารามิเตอร์และการคัดเลือกตัวแปรให้ผลลัพธ์ที่ดีกว่า** โมเดลที่ปรับปรุงมีความสามารถในการทำนายข้อมูลใหม่ที่ดีกว่าโมเดลพื้นฐาน โดยลด Overfitting Gap ได้ 74.3%

3. **ปัจจัยสิ่งแวดล้อมที่สำคัญต่อ LST ได้แก่** รังสีดวงอาทิตย์ (22.10%), ฤดูกาล (20.63%), และค่า Albedo (17.09%) ซึ่งรวมกันแล้วอธิบายความแปรปรวนของ LST ได้เกือบ 60%

4. **การตรวจสอบคุณภาพข้อมูลก่อนการเทรนมีความสำคัญ** การค้นพบว่า LULC และ DEM ไม่มีความแปรปรวนในชุดข้อมูลและการตัดสินใจลบออก ช่วยให้โมเดลมีประสิทธิภาพและตีความได้ง่ายขึ้น

5. **ข้อมูลขนาดใหญ่ (984,274 records) ช่วยให้โมเดลเรียนรู้รูปแบบได้ดี** และมีความเสถียรในการทำนาย ดังเห็นได้จากค่า Cross-Validation R² (0.7012) ที่ใกล้เคียงกับ Test R² (0.7087)

### 3.5.2 ข้อจำกัดของการวิจัย

1. **การสุ่มตัวอย่างพิกเซล**: การสุ่มตัวอย่าง 30,000 พิกเซลอาจไม่ครอบคลุมความหลากหลายของภูมิประเทศและการใช้ที่ดินทั้งหมดในประเทศไทย ส่งผลให้ตัวแปร LULC และ DEM ไม่มีความแปรปรวนเพียงพอและต้องถูกลบออกจากการวิเคราะห์

2. **ค่า RMSE ที่ค่อนข้างสูง**: โมเดลยังคงมี RMSE = 78.76 ซึ่งค่อนข้างสูง อาจต้องพิจารณาเพิ่มตัวแปรอื่นๆ (เช่น ความชื้นในอากาศ ความเร็วลม) หรือใช้อัลกอริทึมที่ซับซ้อนกว่า

3. **ขอบเขตพื้นที่**: การวิจัยนี้ใช้ข้อมูลจากประเทศไทย ผลลัพธ์อาจไม่สามารถนำไปใช้กับพื้นที่อื่นที่มีสภาพภูมิอากาศแตกต่างได้โดยตรง

4. **ข้อมูลที่ขาดหายไป**: ข้อมูลบางตัวแปร (CH4, NO2, CO) มีช่วงเวลาไม่ครบ 94 เดือน ต้องใช้วิธี Mean Imputation ซึ่งอาจส่งผลต่อความแม่นยำของโมเดล

### 3.5.3 ข้อเสนอแนะ

1. **สำหรับการวิจัยต่อเนื่อง:**
   - **ปรับปรุงวิธีการสุ่มตัวอย่าง**: ใช้ Stratified Sampling ตามประเภทที่ดิน (LULC) และระดับความสูง (DEM) เพื่อให้ครอบคลุมความหลากหลายของพื้นที่
   - **เพิ่มจำนวนตัวอย่าง**: เพิ่มจาก 30,000 เป็น 100,000 พิกเซลขึ้นไป เพื่อให้ได้ข้อมูลที่หลากหลายมากขึ้น
   - **ทดลองอัลกอริทึมอื่นๆ**: เช่น Gradient Boosting, XGBoost, หรือ Neural Networks เพื่อเปรียบเทียบประสิทธิภาพ
   - **เพิ่มตัวแปรใหม่**: เช่น ความชื้นในอากาศ ความเร็วลม ปริมาณฝน และข้อมูลการใช้พลังงาน
   - **ศึกษาความสัมพันธ์เชิงพื้นที่**: ใช้เทคนิค Spatial Analysis เพื่อศึกษารูปแบบการกระจายตัวของ LST

2. **สำหรับการนำไปใช้งาน:**
   - โมเดลที่พัฒนาสามารถนำไปใช้ทำนาย LST ในพื้นที่ที่มีลักษณะคล้ายกัน
   - สามารถใช้เป็นเครื่องมือในการวางแผนเมืองและการจัดการสิ่งแวดล้อม
   - ช่วยในการติดตามและประเมินผลกระทบจากการเปลี่ยนแปลงสภาพภูมิอากาศ
   - สามารถประยุกต์ใช้ในการพยากรณ์ภาวะเกาะความร้อนในเมือง (Urban Heat Island)

---

**หมายเหตุ:** ผลการวิจัยนี้ได้จากการทดลองเมื่อวันที่ [15/11/2568] โดยใช้ Python 3.10.11 และ scikit-learn version 1.7.2
